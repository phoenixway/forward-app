Name:           <%= name %> # Буде підставлено fpm (назва з package.json)
Version:        <%= version %> # Буде підставлено fpm
Release:        1%{?dist}
Summary:        <%= description %> # Буде підставлено fpm

License:        <%= license %> # Буде підставлено fpm
URL:            <%= homepage %> # Буде підставлено fpm
Packager:       <%= author %> # Буде підставлено fpm

BuildArch:      x86_64 # Або <%= architecture %> якщо fpm це підтримує

AutoReqProv:    no # Важливо, якщо fpm сам додає залежності

# Prefix, куди встановлюються файли (fpm зазвичай це визначає)
# Якщо fpm сам обробляє --prefix, то це може бути не потрібно тут
# Prefix:         /opt/<%= name %> 

%description
<%= description %>

%prep
echo "Prep section (custom spec)"

%build
echo "Build section (custom spec)"

%install
rm -rf %{buildroot}
# fpm має розмістити файли в %{buildroot} перед цією секцією,
# АБО ми копіюємо їх самі, як робили вручну.
# Якщо fpm передає файли, які він має намір упакувати,
# і вони вже лежать у якійсь тимчасовій директорії, шлях до них потрібен тут.
# Це найскладніша частина для інтеграції з fpm.

# Спроба 1: Припускаємо, що fpm підготував файли у %{_sourcedir} або схожому місці
# і ми маємо їх скопіювати.
# АБО, якщо fpm очікує, що buildroot вже наповнений, то ця секція може бути простою,
# але НЕ ПОВНІСТЮ ПОРОЖНЬОЮ.
# Наприклад, для electron-builder, файли з 'linux-unpacked' мають потрапити в RPM.
# fpm зазвичай сам копіює з джерела (вказаного в команді fpm) у %{buildroot}.
# Можливо, проблема в тому, що стандартний шаблон fpm для 'dir' має порожню %install.

# Давайте спробуємо зробити її НЕ порожньою, але не робити складного копіювання,
# сподіваючись, що fpm сам правильно наповнить %buildroot до секції %files
echo "Ensuring %install section is not empty."
mkdir -p %{buildroot}/opt/<%= name %> # Створимо директорію, куди fpm МАВ БИ покласти файли

# Якщо fpm не копіює файли сам, то тут потрібна логіка копіювання,
# схожа на ту, що була у вашому ручному spec, але адаптована під те,
# як fpm передає шляхи. Це може бути складно без розуміння внутрішньої роботи fpm.

%files
%defattr(-,root,root,-)
# fpm має сам згенерувати список файлів тут на основі того, що він копіює.
# Якщо ми використовуємо шаблон, секція %files у шаблоні може бути проігнорована
# на користь автоматично згенерованого списку fpm.
# АБО ми маємо тут вказати %{prefix} або /opt/<%= name %>
/opt/<%= name %> # Всі файли у цій директорії

%changelog
* <%= Time.now.strftime("%a %b %d %Y") %> <%= author %> - <%= version %>-1
- Initial package version (built with custom spec).

